<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>53 Man Roster Tournament</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { padding: 1rem; }
    .group-card { min-width: 180px; margin: 0.5rem; max-height: 80vh; overflow-y: auto; }
    .list-group-item { cursor: pointer; }
    #available .list-group-item:hover { background: #eef; }
  </style>
</head>
<body>
  <div class="container-fluid">
    <header class="text-center mb-4">
      <h1>HwP 53 Man Roster Tournament</h1>
      <p>Pick the initial 53-man roster and 16-player practice squad for the 2025 LA Chargers.</p>
    </header>
    <div class="row">
      <!-- Available players, grouped by position -->
      <div class="col-md-4">
        <h5>Available Players</h5>
        <div id="available" class="d-flex flex-wrap"></div>
      </div>

      <!-- Selection area -->
      <div class="col-md-8">
        <!-- Name/Handle input -->
        <div class="mb-3">
          <label for="nameInput" class="form-label">Name or Handle</label>
          <input type="text" id="nameInput" class="form-control" placeholder="Enter your name or handle">
        </div>

        <!-- Tabs -->
        <ul class="nav nav-tabs mb-3" id="selectionTabs">
          <li class="nav-item">
            <button class="nav-link active" data-section="roster">Roster (<span id="rosterCount">0</span>/53)</button>
          </li>
          <li class="nav-item">
            <button class="nav-link" data-section="squad">Practice Squad (<span id="squadCount">0</span>/16)</button>
          </li>
        </ul>

        <!-- Roster list -->
        <div id="roster-groups" class="d-flex flex-wrap">
          <div class="group-card border">
            <h6>Your Roster</h6>
            <ul id="rosterList" class="list-group"></ul>
          </div>
        </div>

        <!-- Practice squad list -->
        <div id="squad-groups" class="d-none d-flex flex-wrap">
          <div class="group-card border">
            <h6>Practice Squad</h6>
            <ul id="squadList" class="list-group"></ul>
          </div>
        </div>

        <button id="submitBtn" class="btn btn-primary mt-3">Submit Picks</button>

        <section id="statsSection" class="mt-5" style="display:none;">
          <h5>Pick Popularity</h5>
          <canvas id="statsChart" width="800" height="400"></canvas>
        </section>
      </div>
    </div>
  </div>

  <!-- Firebase & Chart.js -->
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <script>
    // --- Init Firebase ---
    const firebaseConfig = { /* your config */ };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // --- Data & state ---
    const players = [
      { name: "Justin Herbert", pos: "QB", number: 10 },
      { name: "Taylor Heinicke", pos: "QB", number: 4 },
      { name: "Trey Lance", pos: "QB", number: 5 },
      { name: "DJ Uiagalelelei", pos: "QB", number: 13 },
      { name: "Rashawn Slater", pos: "T", number: 70 },
      { name: "Joe Alt", pos: "T", number: 76 },
      { name: "Mekhi Becton", pos: "G", number: 73 },
      { name: "Trey Pipkins", pos: "T", number: 79 },
      { name: "Zion Johnson", pos: "IOL", number: 77 },
      { name: "Andre James", pos: "IOL", number: 78 },
      { name: "Bradley Bozeman", pos: "IOL", number: 75 },
      { name: "Jamaree Salyer", pos: "G", number: 68 },
      { name: "Branson Taylor", pos: "G", number: 71 },
      { name: "Karsen Barnhart", pos: "G", number: 61 },
      { name: "Josh Kaltenberger", pos: "C", number: 63 },
      { name: "Ryan Nelson", pos: "T", number: 74 },
      { name: "Nash Jones", pos: "G", number: 62 },
      { name: "Corey Stewart", pos: "T", number: 65 },
      { name: "Ladd McConkey", pos: "WR", number: 15 },
      { name: "Tre' Harris", pos: "WR", number: 9 },
      { name: "Quentin Johnston", pos: "WR", number: 1 },
      { name: "Derius Davis", pos: "WR", number: 12 },
      { name: "Keandre Lambert-Smith", pos: "WR", number: 84 },
      { name: "Jalen Reagor", pos: "WR", number: 88 },
      { name: "Luke Grimm", pos: "WR", number: 37 },
      { name: "Brendan Rice", pos: "WR", number: 82 },
      { name: "Dez Fitzpatrick", pos: "WR", number: 87 },
      { name: "Jaylen Johnson", pos: "WR", number: 39 },
      { name: "Dalevon Campbell", pos: "WR", number: 38 },
      { name: "JaQue Jackson", pos: "WR", number: 27 },
      { name: "Omarion Hampton", pos: "RB", number: 8 },
      { name: "Najee Harris", pos: "RB", number: 22 },
      { name: "Hassan Haskins", pos: "RB", number: 28 },
      { name: "Kimani Vidal", pos: "RB", number: 30 },
      { name: "Nyheim Hines", pos: "RB", number: 31 },
      { name: "Raheim Sanders", pos: "RB", number: 35 },
      { name: "Jaret Patterson", pos: "RB", number: 34 },
      { name: "Will Dissly", pos: "TE", number: 89 },
      { name: "Tyler Conklin", pos: "TE", number: 83 },
      { name: "Orade Gadsden II", pos: "TE", number: 86 },
      { name: "Tucker Fisk", pos: "TE", number: 42 },
      { name: "Stevo Klotz", pos: "TE", number: 41 },
      { name: "McCallan Castles", pos: "TE", number: 46 },
      { name: "Cam Dicker", pos: "K", number: 11 },
      { name: "Josh Harris", pos: "LS", number: 47 },
      { name: "J.K. Scott", pos: "P", number: 16 },
      { name: "Teair Tart", pos: "DL", number: 90 },
      { name: "Da'Shawn Hand", pos: "DL", number: 91 },
      { name: "Jamaree Caldwell", pos: "DL", number: 99 },
      { name: "Naquon Jones", pos: "DL", number: 96 },
      { name: "Scott Matlock", pos: "DL", number: 44 },
      { name: "Otito Ogbonnia", pos: "DL", number: 93 },
      { name: "Justin Eboigbe", pos: "DL", number: 92 },
      { name: "Christopher Hinton", pos: "DL", number: 98 },
      { name: "TeRah Edwards", pos: "DL", number: 94 },
      { name: "Josh Fuga", pos: "DL", number: 69 },
      { name: "Khalil Mack", pos: "OLB", number: 52 },
      { name: "Tuli Tuipulotu", pos: "OLB", number: 45 },
      { name: "Bud Dupree", pos: "OLB", number: 48 },
      { name: "Kyle Kennard", pos: "OLB", number: 54 },
      { name: "Tremon Morris-Brash", pos: "OLB", number: 57 },
      { name: "Kylan Guidry", pos: "OLB", number: 59 },
      { name: "Garmon Randolph", pos: "OLB", number: 97 },
      { name: "Caleb Murphy", pos: "OLB", number: 50 },
      { name: "Daiyan Henley", pos: "ILB", number: 0 },
      { name: "Denzel Perryman", pos: "ILB", number: 6 },
      { name: "Troy Dye", pos: "ILB", number: 43 },
      { name: "Junior Colson", pos: "ILB", number: 25 },
      { name: "Del'Shawn Phillips", pos: "ILB", number: 53 },
      { name: "Marlowe Wax", pos: "ILB", number: 58 },
      { name: "Kana'i Mauga", pos: "ILB", number: 56 },
      { name: "Tarheeb Still", pos: "CB", number: 29 },
      { name: "Cam Hart", pos: "CB", number: 20 },
      { name: "Donte Jackson", pos: "CB", number: 26 },
      { name: "Benjamin St.-Juste", pos: "CB", number: 24 },
      { name: "Ja'Sir Taylor", pos: "CB", number: 36 },
      { name: "Deane Leonard", pos: "CB", number: 33 },
      { name: "Trikweze Bridges", pos: "CB", number: 31 },
      { name: "Nikko Reed", pos: "CB", number: 46 },
      { name: "Myles Purchase", pos: "CB", number: 49 },
      { name: "Jordan Oladokun", pos: "CB", number: 37 },
      { name: "Eric Rogers", pos: "CB", number: 39 },
      { name: "Derwin James", pos: "S", number: 3 },
      { name: "Elijah Molden", pos: "S", number: 2 },
      { name: "Alohi Gilman", pos: "S", number: 3 },
      { name: "R.J. Mickens", pos: "S", number: 27 },
      { name: "Tony Jefferson", pos: "S", number: 23 },
      { name: "Kendall Williamson", pos: "S", number: 40 },
      { name: "Emany Johnson", pos: "S", number: 38 },
      { name: "Jaylen Jones", pos: "S", number: 35 }
    ];
    let picked = { roster: [], squad: [] };
    let currentSection = 'roster';

    document.addEventListener('DOMContentLoaded', () => {
      setupTabs();
      renderAll();
      document.getElementById('submitBtn').addEventListener('click', submitPicks);
      if (location.hash==='#!stats') {
        document.getElementById('statsSection').style.display='block';
        loadStats();
      }
    });

    // --- Tab switching ---
    function setupTabs() {
      document.querySelectorAll('#selectionTabs .nav-link').forEach(btn => {
        btn.addEventListener('click', () => {
          document.querySelectorAll('#selectionTabs .nav-link')
            .forEach(b=>b.classList.remove('active'));
          btn.classList.add('active');
          currentSection = btn.dataset.section;
          document.getElementById('roster-groups')
            .classList.toggle('d-none', currentSection!=='roster');
          document.getElementById('squad-groups')
            .classList.toggle('d-none', currentSection!=='squad');
        });
      });
    }

    // --- Rendering ---
    function renderAll() {
      renderAvailable();
      renderRoster();
      renderSquad();
      // update counts
      document.getElementById('rosterCount').textContent = picked.roster.length;
      document.getElementById('squadCount').textContent = picked.squad.length;
    }

    function renderAvailable() {
      const used = new Set([...picked.roster, ...picked.squad]);
      const posGroups = {};
      players.forEach((p,i) => {
        if (used.has(i)) return;
        posGroups[p.pos] = posGroups[p.pos]||[];
        posGroups[p.pos].push({ ...p, i });
      });
      const container = document.getElementById('available');
      container.innerHTML = '';
      for (const pos of Object.keys(posGroups)) {
        const card = document.createElement('div');
        card.className = 'group-card border';
        card.innerHTML = `<h6>${pos}</h6>`;
        const ul = document.createElement('ul');
        ul.className = 'list-group';
        posGroups[pos].forEach(p => {
          const li = document.createElement('li');
          li.className='list-group-item';
          li.textContent = `${p.name} #${p.number}`;
          li.dataset.idx = p.i;
          li.addEventListener('click', selectPlayer);
          ul.append(li);
        });
        card.append(ul);
        container.append(card);
      }
    }

    function renderRoster() {
      const ul = document.getElementById('rosterList');
      ul.innerHTML = '';
      picked.roster.forEach(i => {
        const p = players[i];
        const li = document.createElement('li');
        li.className='list-group-item list-group-item-primary';
        li.textContent = `${p.name} (${p.pos}) #${p.number}`;
        li.dataset.idx = i;
        li.addEventListener('click', ()=>unselectPlayer(i,'roster'));
        ul.append(li);
      });
    }

    function renderSquad() {
      const ul = document.getElementById('squadList');
      ul.innerHTML = '';
      picked.squad.forEach(i => {
        const p = players[i];
        const li = document.createElement('li');
        li.className='list-group-item list-group-item-secondary';
        li.textContent = `${p.name} (${p.pos}) #${p.number}`;
        li.dataset.idx = i;
        li.addEventListener('click', ()=>unselectPlayer(i,'squad'));
        ul.append(li);
      });
    }

    // --- Selection logic ---
    function selectPlayer(e) {
      const idx = +e.currentTarget.dataset.idx;
      if (currentSection==='roster') {
        if (picked.roster.length>=53) { alert('You can only pick 53 players'); return; }
        picked.roster.push(idx);
      } else {
        if (picked.squad.length>=16) { alert('Practice squad is full'); return; }
        picked.squad.push(idx);
      }
      renderAll();
    }

    function unselectPlayer(idx, section) {
      picked[section] = picked[section].filter(x=>x!==idx);
      renderAll();
    }

    // --- Submit ---
    function submitPicks() {
      const name = document.getElementById('nameInput').value.trim();
      if (!name) { alert('Please enter your name or handle'); return; }
      if (picked.roster.length!==53 || picked.squad.length!==16) {
        alert('You must pick exactly 53 roster & 16 squad'); return;
      }
      const rosterNames = picked.roster.map(i=>players[i].name);
      const squadNames  = picked.squad.map(i=>players[i].name);
      db.collection('submissions')
        .add({ name, date:new Date(), roster:rosterNames, squad:squadNames })
        .then(()=>alert('Saved!'))
        .catch(e=>{ console.error(e); alert('Error saving—check console'); });
    }

    // --- Stats (unchanged) ---
    function loadStats() {
      db.collection('submissions').get().then(snap => {
        const counts = {};
        snap.forEach(doc => {
          [...doc.data().roster, ...doc.data().squad]
            .forEach(n=>counts[n]=(counts[n]||0)+1);
        });
        new Chart(document.getElementById('statsChart'), {
          type:'bar',
          data:{ labels:Object.keys(counts), datasets:[{ label:'Picks', data:Object.values(counts) }] }
        });
      });
    }
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
